(()=>{"use strict";var e={875:(e,t,a)=>{a.d(t,{Z:()=>i});var r=a(761),s=a.n(r)()((function(e){return e[1]}));s.push([e.id,'.heart.sheet.actor h2{font-family:"MelmaCracked";text-transform:uppercase;color:#630000;border:0;font-weight:bold;margin:0;padding:0;flex-grow:0}.heart.sheet.actor h2>div{font-size:1rem;color:#000}.heart.sheet.actor h3{font-family:"MelmaCracked";font-size:1.5em;text-transform:uppercase;color:#630000;border:0;font-weight:bold;margin:0;padding:0;flex-grow:0}.heart.sheet.actor .editor-content{font-size:15px;line-height:20px;background-image:-moz-linear-gradient(top, transparent, transparent 19px, rgba(99, 0, 0, 0.2) 0px);background-image:-webkit-linear-gradient(top, transparent, transparent 19px, rgba(99, 0, 0, 0.2) 0px);background-size:100% 20px;min-height:8em}.heart.sheet.actor .editor-content p{margin:0}.heart.sheet.actor.base img.profile{flex-grow:1;background:rgba(0,0,0,.5);cursor:pointer;max-height:6em}.heart.sheet.actor.base .text{flex-grow:3;display:flex;flex-flow:column}.heart.sheet.actor.base input[name=name]{grid-area:1/2/2/3;flex-grow:0;font-size:2em;border:0;align-self:bottom;text-align:center;background:none;color:#630000;font-weight:bold}.heart.sheet.actor.base .actor-type{color:#2c2c2c;font-size:1.2em;text-transform:uppercase;font-style:italic;align-self:top;flex-grow:0;text-align:center}',""]);const i=s},963:(e,t,a)=>{a.d(t,{Z:()=>i});var r=a(761),s=a.n(r)()((function(e){return e[1]}));s.push([e.id,".sticky{position:sticky;top:0;z-index:1}.heart.sheet.actor.character{position:relative;background:#fff}.heart.sheet.actor.character img.profile{object-fit:contain;height:100%;min-height:100px;border:0}.heart.sheet.actor.character h2{margin-top:1em}.heart.sheet.actor.character .faded{opacity:66%}.heart.sheet.actor.character .right{float:right;flex:auto 0 0}.heart.sheet.actor.character .col{margin:0 .5em}.heart.sheet.actor.character .grid-2 input:not([type]){border:0;border-bottom:1px dotted #630000;font-size:1.5em}.heart.sheet.actor.character .grid-3{display:grid;grid-template-columns:1fr 1fr 1fr;place-items:stretch;column-gap:.5em}.heart.sheet.actor.character .grid-3.resistances{grid-template-columns:auto 1fr auto;align-items:start;justify-content:top}.heart.sheet.actor.character .grid-3.resistances.left{justify-self:left}.heart.sheet.actor.character .bold{font-weight:bold;font-size:16px}",""]);const i=s},780:(e,t,a)=>{a.d(t,{Z:()=>i});var r=a(761),s=a.n(r)()((function(e){return e[1]}));s.push([e.id,'.heart.form .options,.chat-message .options{display:flex;align-items:center;justify-content:start}.heart.form .options .option,.chat-message .options .option{color:#000;font-family:"Alegreya";border:1px solid #000;border-radius:5px;background:#fff;margin:2px;padding:4px;display:inline-block;text-transform:uppercase}.heart.form input:checked+.option,.chat-message input:checked+.option{background:#630000;color:#fff}.heart.form .window-content{background:#fff}.heart.form label{font-weight:bold;font-family:"MelmaCracked";display:flex;align-items:center;justify-content:start;text-align:left}.heart.form .description{text-align:center}',""]);const i=s},429:(e,t,a)=>{a.d(t,{Z:()=>i});var r=a(761),s=a.n(r)()((function(e){return e[1]}));s.push([e.id,".chat-message{background:#630000;color:#fff;border-color:#949494}.chat-message .item-type{text-transform:capitalize}.chat-message .message-header{color:#fff}.chat-message .dice-roll .dice-formula,.chat-message .dice-roll .dice-total{background:#fff;color:#630000;border-color:#949494}.chat-message .dice-roll .dice-formula{background:#000;color:#fff;font-size:1.2em;padding:.2em}.chat-message .dice-roll .dice .part-header{border-bottom-color:#fff}.chat-message .dice-roll .dice .part-header .part-formula{text-transform:uppercase}.chat-message .dice-roll .dice .dice-rolls .roll.discarded{filter:sepia(0.5) contrast(0.75) opacity(0.5)}.chat-message .message-content+.message-content{margin-top:.5em}.chat-message .heart h1{border:0;text-align:center}.chat-message .heart button{background:#949494;color:#fff}.chat-message .heart button .fas{padding:0 .5em}.chat-message .heart button+button{margin-top:.2em}.chat-message .roll-request{background:#000;padding:1em;border-radius:.5em;font-size:1.1em}.chat-message .roll-request label{display:flex;align-items:center;justify-items:end;place-content:end}.chat-message .roll-request select{color:#fff;appearance:none;width:100%;overflow:auto}.chat-message .roll-request select option{appearance:none;text-align:center;background:#000}.chat-message .roll-request button>*{text-overflow:ellipsis}.chat-message .roll-request .options{align-items:stretch;flex-wrap:wrap}.chat-message .roll-request .options .option img{height:3em;width:100%;object-fit:contain;border:0;background:rgba(0,0,0,.5);padding:0;margin:0;border-radius:0}",""]);const i=s},746:(e,t,a)=>{a.d(t,{Z:()=>i});var r=a(761),s=a.n(r)()((function(e){return e[1]}));s.push([e.id,".heart.sheet img.profile{flex-grow:1;background:rgba(0,0,0,.5);cursor:pointer}.heart.sheet .text{flex-grow:3;display:flex;flex-flow:column}.heart.sheet .subtitle{color:#2c2c2c;font-size:1.2em;text-transform:uppercase;font-style:italic;align-self:top;flex-grow:0;text-align:center}.heart.sheet .editor-content{font-size:15px;line-height:20px;background-image:-moz-linear-gradient(top, transparent, transparent 19px, rgba(99, 0, 0, 0.2) 0px);background-image:-webkit-linear-gradient(top, transparent, transparent 19px, rgba(99, 0, 0, 0.2) 0px);background-size:100% 20px;min-height:8em}.heart.sheet .editor-content p{margin:0}.heart.sheet .item-list{font-size:1.2em}.heart.sheet.base .info{display:flex;flex:0% 0 1;flex-flow:row wrap;place-items:center;place-content:center;background:#949494}.heart.sheet.base .info>*{flex:0% 1 1}.heart.sheet.base img.profile{flex-grow:1;background:rgba(0,0,0,.5);cursor:pointer;max-height:6em}.heart.sheet.base .text{flex-grow:3;display:flex;flex-flow:column}.heart.sheet.base input[name=name]{grid-area:1/2/2/3;flex-grow:0;font-size:2em;border:0;align-self:bottom;text-align:center;background:none;color:#630000;font-weight:bold}",""]);const i=s},402:(e,t,a)=>{a.d(t,{Z:()=>d});var r=a(761),s=a.n(r),i=a(80),l=a.n(i),n=a(239),o=s()((function(e){return e[1]}));o.push([e.id,"@import url(https://fonts.googleapis.com/css2?family=Alegreya:ital,wght@0,400;0,500;0,600;1,400&display=swap);"]);var c=l()(n);o.push([e.id,'@font-face{font-family:"MelmaCracked";src:url('+c+')}.title-font{font-family:"MelmaCracked"}input.hidden{display:none !important}input.toggle-display~*{max-height:0;overflow:hidden;transition:max-height .2s ease-out}input.toggle-display:checked~*{max-height:20em;transition:max-height .2s ease-in}.toggle-button{font-family:"MelmaCracked";color:#000;font-size:1.5em;text-align:center;display:flex;flex-flow:row wrap;justify-content:center;padding:.2em;margin:.3em 0;border-radius:.2em;background:#fff;border:3px solid #000;cursor:pointer}.chat-message{background:#630000;color:#fff;border-color:#949494}.chat-message .message-header{color:#fff}.chat-message .dice-roll .dice-formula,.chat-message .dice-roll .dice-total{background:#fff;color:#630000;border-color:#949494}.chat-message .dice-roll .dice-formula{background:#000;color:#fff}.chat-message .dice-roll .dice .part-header{border-bottom-color:#fff}.chat-message .dice-roll .dice .part-header .part-formula{text-transform:uppercase}.chat-message .dice-roll .dice .dice-rolls .roll.discarded{filter:sepia(0.5) contrast(0.75) opacity(0.5)}.chat-message .message-content+.message-content{margin-top:.5em}.chat-message .heart button{background:#949494;color:#fff}.chat-message .heart button .fas{padding:0 .5em}.chat-message .heart button+button{margin-top:.2em}.heart{font-family:"Alegreya",serif}.heart input{font-family:inherit}.heart button{font-family:"Alegreya";background:#630000;color:#fff;border-color:#2c2c2c;font-size:1rem;text-transform:uppercase;font-weight:bold;cursor:pointer}.heart.buttons{display:flex;flex-flow:row wrap;background:#000}.heart.buttons>*{flex:50px 1 0;min-width:200px}.heart table{border:0}.heart .ordered-checkable-box{flex:14px 0 0}.heart .ordered-checkable-box::after,.heart .ordered-checkable-box.checked::after{content:"";display:inline-block;width:14px;height:14px;border:3px solid #000;margin:0 2px}.heart .ordered-checkable-box.checked::after{background-image:linear-gradient(90deg, #000 0%, #000 100%);background-size:12px 12px;background-position:center;background-repeat:no-repeat}.heart input[type=checkbox]{flex:14px 0 0;appearance:none;display:inline-block;width:14px;height:14px;border:3px solid #000;margin:0 2px;box-sizing:content-box}.heart input[type=checkbox]:checked{background-image:linear-gradient(90deg, #000 0%, #000 100%);background-size:12px 12px;background-position:center;background-repeat:no-repeat}.heart input[type=checkbox].invert{border-color:#fff}.heart input[type=checkbox].invert:checked{background-image:linear-gradient(90deg, #fff 0%, #fff 100%)}.heart .red .ordered-checkable-box::after,.heart .red .ordered-checkable-box.checked:after{border-color:#630000}.heart .red .ordered-checkable-box.checked::after{background-image:linear-gradient(90deg, #630000 0%, #630000 100%)}.window-app .window-content{padding:0}.window-app .window-content>*{padding:8px}.grid-2{display:grid;grid-template-columns:1fr 1fr;place-items:stretch;grid-gap:.5em;margin:.5em}.grid-2.auto-first-col{grid-template-columns:auto 1fr;margin:.5em 0}.grid-2 .wide{grid-column:1/3}.grid-2.place-center{place-content:center}.grid-2.place-top{align-items:start}',""]);const d=o},979:(e,t,a)=>{a.d(t,{Z:()=>i});var r=a(761),s=a.n(r)()((function(e){return e[1]}));s.push([e.id,'.heart.fallout-roll .dice-total{font-family:"MelmaCracked"}',""]);const i=s},107:(e,t,a)=>{a.d(t,{Z:()=>i});var r=a(761),s=a.n(r)()((function(e){return e[1]}));s.push([e.id,'.heart.heart-roll .dice-total{font-family:"MelmaCracked"}.heart.heart-roll .dice-tooltip{text-align:center;display:flex;flex-flow:row wrap;align-items:flex-end}.heart.heart-roll .dice-tooltip .tooltip-part{flex:33% 1 1;text-align:center}.heart.heart-roll .dice-tooltip .tooltip-part .dice-rolls{text-align:center;display:flex;flex-flow:row wrap;justify-content:center}.heart.heart-roll+.heart.heart-roll{margin-top:.5em}',""]);const i=s},361:(e,t,a)=>{a.d(t,{Z:()=>i});var r=a(761),s=a.n(r)()((function(e){return e[1]}));s.push([e.id,".heart.dice-roll .flexrow .dice-total{flex:1;display:flex;place-items:center;place-content:center}.heart.dice-roll .flexrow .icon-button{padding:0;flex:1em 0 0}.heart.dice-roll .flexrow .icon-button+.icon-button{margin:0}",""]);const i=s},695:e=>{var t={};e.exports=function(e){if(void 0===t[e]){var a=document.querySelector(e);if(window.HTMLIFrameElement&&a instanceof window.HTMLIFrameElement)try{a=a.contentDocument.head}catch(e){a=null}t[e]=a}return t[e]}},379:e=>{var t=[];function a(e){for(var a=-1,r=0;r<t.length;r++)if(t[r].identifier===e){a=r;break}return a}function r(e,r){for(var i={},l=[],n=0;n<e.length;n++){var o=e[n],c=r.base?o[0]+r.base:o[0],d=i[c]||0,h="".concat(c," ").concat(d);i[c]=d+1;var u=a(h),p={css:o[1],media:o[2],sourceMap:o[3]};-1!==u?(t[u].references++,t[u].updater(p)):t.push({identifier:h,updater:s(p,r),references:1}),l.push(h)}return l}function s(e,t){var a=t.domAPI(t);return a.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;a.update(e=t)}else a.remove()}}e.exports=function(e,s){var i=r(e=e||[],s=s||{});return function(e){e=e||[];for(var l=0;l<i.length;l++){var n=a(i[l]);t[n].references--}for(var o=r(e,s),c=0;c<i.length;c++){var d=a(i[c]);0===t[d].references&&(t[d].updater(),t.splice(d,1))}i=o}}},216:e=>{e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t),t}},795:e=>{e.exports=function(e){var t=e.insertStyleElement(e);return{update:function(a){!function(e,t,a){var r=a.css,s=a.media,i=a.sourceMap;s?e.setAttribute("media",s):e.removeAttribute("media"),i&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),t.styleTagTransform(r,e)}(t,e,a)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},761:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var a=e(t);return t[2]?"@media ".concat(t[2]," {").concat(a,"}"):a})).join("")},t.i=function(e,a,r){"string"==typeof e&&(e=[[null,e,""]]);var s={};if(r)for(var i=0;i<this.length;i++){var l=this[i][0];null!=l&&(s[l]=!0)}for(var n=0;n<e.length;n++){var o=[].concat(e[n]);r&&s[o[0]]||(a&&(o[2]?o[2]="".concat(a," and ").concat(o[2]):o[2]=a),t.push(o))}},t}},80:e=>{e.exports=function(e,t){return t||(t={}),"string"!=typeof(e=e&&e.__esModule?e.default:e)?e:(/^['"].*['"]$/.test(e)&&(e=e.slice(1,-1)),t.hash&&(e+=t.hash),/["'() \t\n]/.test(e)||t.needQuotes?'"'.concat(e.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):e)}},805:(e,t,a)=>{a.r(t);var r={};a.r(r),a.d(r,{default:()=>X});var s={};a.r(s),a.d(s,{default:()=>V});var i={};a.r(i),a.d(i,{default:()=>Y});var l={};a.r(l),a.d(l,{default:()=>ee});var n={};a.r(n),a.d(n,{default:()=>te});var o={};a.r(o),a.d(o,{default:()=>ae});var c={};a.r(c),a.d(c,{default:()=>re});var d={};a.r(d),a.d(d,{default:()=>se});var h={};a.r(h),a.d(h,{default:()=>ie});var u={};a.r(u),a.d(u,{default:()=>le});var p={};a.r(p),a.d(p,{default:()=>ne});var m={};a.r(m),a.d(m,{default:()=>oe});var f={};a.r(f),a.d(f,{default:()=>ce});var g={};a.r(g),a.d(g,{default:()=>de});var b={};a.r(b),a.d(b,{default:()=>he});var v={};a.r(v),a.d(v,{default:()=>ue});var y={};a.r(y),a.d(y,{default:()=>pe});var k={};a.r(k),a.d(k,{default:()=>me});var w={};a.r(w),a.d(w,{default:()=>fe});var x={};a.r(x),a.d(x,{default:()=>ge});var z={};a.r(z),a.d(z,{default:()=>be});var T={};a.r(T),a.d(T,{default:()=>je});var _={};a.r(_),a.d(_,{default:()=>Ie});var C={};a.r(C),a.d(C,{default:()=>Ne});var H={};a.r(H),a.d(H,{default:()=>Pe});var S={};a.r(S),a.d(S,{default:()=>Be});var O={};a.r(O),a.d(O,{default:()=>De});var A={};a.r(A),a.d(A,{initialise:()=>We});var R={};a.r(R),a.d(R,{default:()=>Ke});var q={};a.r(q),a.d(q,{default:()=>Qe});var j={};a.r(j),a.d(j,{default:()=>Xe});var E={};a.r(E),a.d(E,{initialise:()=>tt});var I={};a.r(I),a.d(I,{initialise:()=>lt});var F={};a.r(F),a.d(F,{default:()=>nt});var L={};a.r(L),a.d(L,{data:()=>ct});var N={};a.r(N),a.d(N,{data:()=>ht});var Z={};a.r(Z),a.d(Z,{data:()=>ft,initialise:()=>mt});var P={};a.r(P),a.d(P,{data:()=>bt});var M={};a.r(M),a.d(M,{data:()=>yt});var B={};a.r(B),a.d(B,{data:()=>wt});var D={};a.r(D),a.d(D,{initialise:()=>zt});var J={};a.r(J),a.d(J,{default:()=>St,initialise:()=>Ht});var G={};a.r(G),a.d(G,{default:()=>$t,initialise:()=>It});var U={};a.r(U),a.d(U,{default:()=>Ft});var W={};a.r(W),a.d(W,{default:()=>Lt});var K={};a.r(K),a.d(K,{initialise:()=>Mt});var Q={};a.r(Q);const X={path:"heart:actors/adversary/sheet.html",source:'{{> "heart:actors/base/sheet.html" type="adversary"}}'},V={path:"heart:actors/base/sheet.html",source:'{{#> "heart:common/sheet.html" documentName="actor" type=type}}\r\n    {{editor content=data.data.description target="data.description" button=true editable=editable owner=owner}}\r\n{{/ "heart:common/sheet.html" }}'},Y={path:"heart:actors/character/sheet.html",source:'{{#*inline "itemList"}}\r\n    {{#with (lookup actor.itemTypes type) as |list|}}\r\n    {{#if list.length}}\r\n    <div class="item-list">\r\n        {{#each list as |item|}}\r\n            <div data-item="{{item.data._id}}" class="flexrow">\r\n                <div>\r\n                    {{> @partial-block item=item }}\r\n                </div>\r\n            \r\n                <div class="right">\r\n                    {{#if item.isOwner}}\r\n                        <a data-action="delete"><span class="fas fa-trash"></span></a>\r\n                    {{/if}}\r\n                </div>\r\n            </div>\r\n        {{/each}}\r\n    </div>\r\n    {{/if}}\r\n    {{/with}}\r\n{{/inline}}\r\n\r\n<div class="heart flexrow buttons sticky">\r\n    <button data-action="prepare-request-roll"><span class="fas fa-dice"></span> {{localizeHeart "perform" "request-roll"}}</button>\r\n    <button data-action="roll"><span class="fas fa-dice"></span> {{localizeHeart "perform" "roll"}}</button>\r\n    <button data-action="stress-roll"><span class="fas fa-dice"></span> {{localizeHeart "perform" "roll-stress"}}</button>\r\n    <button data-action="fallout-roll"><span class="fas fa-dice"></span> {{localizeHeart "perform" "roll-fallout"}}</button>\r\n</div>\r\n<form class="heart sheet actor character {{cssClass}}" autocomplete="off">\r\n    <div class="grid-2 place-top">\r\n        <img class="profile" src="{{data.img}}" title="{{actor.name}}" data-edit="img"/>\r\n        <div class="grid-3 resistances place-top">\r\n            <div></div>\r\n            <div></div>\r\n            <h3 class="center">{{localizeHeart "resistance" "protection" "label-multiple"}}</h3>\r\n            {{#each actor.data.data.resistances as |resistance name|}}\r\n                <h3 class="left">{{localizeHeart "resistance" name}}</h3>\r\n                <div class="red" data-target=\'data.resistances.{{name}}.value\'>{{{ordered-checkable resistance.value 10}}}</div>\r\n                <div class="red" data-target=\'data.resistances.{{name}}.protection\'>{{{ordered-checkable resistance.protection 5}}}</div>\r\n            {{/each}}\r\n        </div>\r\n        <div class="info">\r\n            <div class="grid-2 auto-first-col place-center">\r\n                <h2>{{localizeHeart "character" "name"}}</h2>\r\n                <input name="name" value="{{actor.name}}"/>\r\n                <h2>{{localizeHeart "character" "class"}}</h2>\r\n                <input name="data.class" value="{{actor.data.data.class}}"/>\r\n                <h2>{{localizeHeart "character" "calling"}}</h2>\r\n                <input name="data.calling" value="{{actor.data.data.calling}}"/>\r\n            </div>\r\n        </div>\r\n        <div class="beats">\r\n            <h2>\r\n                {{localizeHeart "beat" "active" "label-multiple"}}\r\n                {{#if actor.isOwner}}\r\n                <div class="right">\r\n                    <a data-action="add" data-type="beat"><span class="fas fa-plus"></span></a>\r\n                </div>\r\n                {{/if}}\r\n            </h2>\r\n            {{#> itemList type="beat" actor=actor}}\r\n            <a data-action="view">{{item.name}}</a>\r\n            {{/itemList}}\r\n            {{editor content=actor.data.data.active_beats target="data.active_beats" button=true editable=editable owner=owner}}\r\n        </div>\r\n        \r\n        <div class="equipment">\r\n            <h2>{{localizeHeart "equipment" "label-multiple"}}\r\n                {{#if actor.isOwner}}\r\n                <div class="right">\r\n                    <a data-action="add" data-type="equipment"><span class="fas fa-plus"></span></a>\r\n                </div>\r\n                {{/if}}\r\n            </h2>\r\n            {{#> itemList type="equipment"  actor=actor}}\r\n                <a data-action="view">{{item.name}}</a>\r\n                ({{localizeHeart "equipment" "type" item.data.data.type}}, <a data-action="item-roll"><span class="fas fa-dice"></span> {{item.data.data.di_size}}</a>\r\n                {{#if item.data.data.tags.length}}\r\n                , {{join ", " array=item.data.data.tags}}\r\n                {{/if}})\r\n            {{/itemList}}\r\n            {{editor content=actor.data.data.equipment target="data.equipment" button=true editable=editable owner=owner}}\r\n        </div>\r\n\r\n        <div class="resources">\r\n            <h2>{{localizeHeart "resource" "label-multiple"}}\r\n                {{#if actor.isOwner}}\r\n                <div class="top right">\r\n                    <a data-action="add" data-type="resource"><span class="fas fa-plus"></span></a>\r\n                </div>\r\n                {{/if}}\r\n            </h2>\r\n            {{#> itemList type="resource" actor=actor}}\r\n            <a data-action="view">{{item.name}}</a>\r\n            (<a data-action="item-roll"><span class="fas fa-dice"></span> {{item.data.data.di_size}}</a>, {{localizeHeart "domain" item.data.data.domain}}\r\n            {{#if item.data.data.tags.length}}\r\n            , {{join ", "  array=item.data.data.tags}}\r\n            {{/if}})\r\n            {{/itemList}}\r\n            {{editor content=actor.data.data.resources target="data.resources" button=true editable=editable owner=owner}}\r\n        </div>\r\n        <div class="abilities">\r\n            <h2>\r\n                {{localizeHeart "ability"  "label-multiple"}}\r\n                {{#if actor.isOwner}}\r\n                <div class="top right">\r\n                    <a data-action="add" data-type="ability"><span class="fas fa-plus"></span></a>\r\n                </div>\r\n                {{/if}}\r\n            </h2>\r\n            \r\n            {{#> itemList type="ability" actor=actor}}\r\n            <a data-action="view">{{item.name}}</a>\r\n            {{/itemList}}\r\n            {{editor content=actor.data.data.abilities target="data.abilities" button=true editable=editable owner=owner}}\r\n        </div>\r\n        <div class="fallout">\r\n            <h2>\r\n                {{localizeHeart "fallout" "label-multiple"}}\r\n                {{#if actor.isOwner}}\r\n                <div class="top right">\r\n                    <a data-action="add" data-type="fallout"><span class="fas fa-plus"></span></a>\r\n                </div>\r\n                {{/if}}\r\n            </h2>\r\n            {{#> itemList type="fallout" actor=actor}}\r\n            <a data-action="view">{{item.name}}</a>\r\n            {{/itemList}}\r\n            {{editor content=actor.data.data.fallout target="data.fallout" button=true editable=editable owner=owner}}\r\n        </div>\r\n        <div class="skills grid-2 auto-first-col">\r\n            <h3 class="center">{{localizeHeart "skill" "label-multiple"}}</h3>\r\n            <h3 class="faded">{{localizeHeart "skill" "knack" "label-multiple"}}</h3>\r\n            {{#each actor.data.data.skills as |skill name|}}\r\n                <div class="flexrow">\r\n                    <input type="checkbox" name="data.skills.{{name}}.value" {{checked skill.value}}/>\r\n                    <span class="bold">{{localizeHeart "skill" name}}</span>\r\n                </div>\r\n                <input name="data.skills.{{name}}.knack" value="{{skill.knack}}"/>\r\n            {{/each}}\r\n        </div>\r\n\r\n        <div class="domains grid-2 auto-first-col">\r\n            <h3 class="center">{{localizeHeart "domain" "label-multiple"}}</h3>\r\n            <h3 class="faded">{{localizeHeart "domain" "knack" "label-multiple"}}</h3>\r\n            {{#each actor.data.data.domains as |domain name|}}\r\n                <div class="flexrow">\r\n                    <input type="checkbox" name="data.domains.{{name}}.value" {{checked domain.value}}/>\r\n                    <span class="bold">{{localizeHeart "domain" name}}</span>\r\n                </div>\r\n                <input name="data.domains.{{name}}.knack" value="{{domain.knack}}"/>\r\n            {{/each}}\r\n        </div>\r\n\r\n        \r\n        <h3 class="center wide">{{localizeHeart "character" "notes"}}</h3>\r\n        <div class="wide">\r\n            {{editor content=actor.data.data.notes target="data.notes" button=true editable=editable owner=owner}}\r\n        </div>\r\n    </div>\r\n</form>'},ee={path:"heart:actors/delve/sheet.html",source:'{{> "heart:actors/base/sheet.html" type="delve"}}'},te={path:"heart:actors/landmark/sheet.html",source:'{{> "heart:actors/base/sheet.html" type="landmark"}}'},ae={path:"heart:applications/base/application.html",source:'<form class="heart form {{type}} {{classes}} grid-2 auto-first-col">\r\n    <div class="wide description">\r\n    {{localizeHeart "applications" type "description"}}\r\n    </div>\r\n    {{> @partial-block}}\r\n    <div class="wide grid-2">\r\n        <button data-action=\'cancel\'><span class="fas fa-times"></span> {{localizeHeart \'cancel\'}}</button>\r\n        <button data-action=\'submit\'><span class="fas fa-dice"></span> {{localizeHeart \'roll\'}}</button>\r\n    </div>\r\n</form>'},re={path:"heart:applications/prepare-roll-request/application.html",source:'{{#> "heart:applications/base/application.html" type="prepare-roll-request"}}\r\n<label>\r\n    {{localizeHeart "difficulty" "label-single"}}\r\n</label>\r\n<select name="difficulty">\r\n    {{selectOptions difficulties}}\r\n</select>\r\n\r\n<label>\r\n    {{localizeHeart "character" "label-multiple"}}\r\n</label>\r\n<div class="options">\r\n    {{#each characters as |character char_id|}}\r\n    {{#with (randomID) as |id|}}\r\n    <input class="hidden" type="checkbox" id="{{id}}" name="character" value="{{char_id}}" checked/>\r\n    <label for="{{id}}" class="option">\r\n        {{character}}\r\n    </label>\r\n    {{/with}}\r\n    {{/each}}\r\n</div>\r\n\r\n<label>\r\n    {{localizeHeart "skill" "label-multiple"}}\r\n</label>\r\n<div class="options">\r\n    {{#each skills as |skill name|}}\r\n    {{#with (randomID) as |id|}}\r\n    <input class="hidden" type="checkbox" id="{{id}}" name="skill" value="{{name}}"/>\r\n    <label for="{{id}}" class="option">\r\n        {{skill}}\r\n    </label>\r\n    {{/with}}\r\n    {{/each}}\r\n</div>\r\n\r\n\r\n<label>\r\n    {{localizeHeart "domain" "label-multiple"}}\r\n</label>\r\n<div class="options">\r\n    {{#each domains as |domain name|}}\r\n    {{#with (randomID) as |id|}}\r\n    <input class="hidden" type="checkbox" id="{{id}}" name="domain" value="{{name}}"/>\r\n    <label for="{{id}}" class="option">\r\n        {{domain}}\r\n    </label>\r\n    {{/with}}\r\n    {{/each}}\r\n</div>\r\n\r\n<label>\r\n    {{localizeHeart "character" "label-valid-helpers"}}\r\n</label>\r\n<div class="options">\r\n    {{#each characters as |character char_id|}}\r\n    {{#with (randomID) as |id|}}\r\n    <input class="hidden" type="checkbox" id="{{id}}" name="helper" value="{{char_id}}" checked/>\r\n    <label for="{{id}}" class="option">\r\n        {{character}}\r\n    </label>\r\n    {{/with}}\r\n    {{/each}}\r\n</div>\r\n{{/ "heart:applications/base/application.html"}}'},se={path:"heart:applications/prepare-roll-request/chat-message.html",source:'<form class="heart roll-request grid-2 auto-first-col place-center">\r\n    <h1 class="wide title-font ">{{localizeHeart "rolls" "roll-request" "label"}}</h1>\r\n    <label class="title-font">{{localizeHeart "difficulty" "label-single"}}</label>\r\n    <div>\r\n        {{localizeHeart "difficulty" difficulty}}\r\n        <input type="hidden" name="difficulty" value="{{difficulty}}"/>\r\n    </div>\r\n\r\n    <label class="title-font">{{localizeHeart "skill" "label-single"}}</label>\r\n    {{#if (lt skills.length 2)}}\r\n        {{#if (eq skills.length 1)}}\r\n            <div>\r\n                {{localizeHeart "skill" (lookup skills 0)}}\r\n                <input type="hidden" name="skill" value="{{lookup skills 0}}"/>\r\n            </div>\r\n        {{else}}\r\n            <div>{{localizeHeart "none"}}</div>\r\n        {{/if}}\r\n    {{else}}\r\n    <select name="skill">\r\n        {{#each skills as |skill|}}\r\n        <option value="{{skill}}">{{localizeHeart "skill" skill}}</option>\r\n        {{/each}}\r\n    </select>\r\n    {{/if}}\r\n\r\n    <label class="title-font">{{localizeHeart "domain" "label-single"}}</label>\r\n    {{#if (lt domains.length 2)}}\r\n        {{#if (eq domains.length 1)}}\r\n        <div>\r\n            {{localizeHeart "domain" (lookup domains 0)}}\r\n            <input type="hidden" name="domain" value="{{lookup domains 0}}"/>\r\n        </div>\r\n        {{else}}\r\n            <div>{{localizeHeart "none"}}</div>\r\n        {{/if}}\r\n    {{else}}\r\n    <select name="domain">\r\n        {{#each domains as |domain|}}\r\n        <option value="{{domain}}">{{localizeHeart "domain" domain}}</option>\r\n        {{/each}}\r\n    </select>\r\n    {{/if}}\r\n\r\n    <label class="title-font">{{localizeHeart "mastery" "short"}}</label>\r\n    <input class="invert" type="checkbox" name="mastery"/>\r\n\r\n    <label class="title-font">{{localizeHeart "help"}}</label>\r\n    {{#if validHelpers}}\r\n    <select name="helper" multiple>\r\n        {{#each validHelpers as |helper_id|}}\r\n        {{#with (getActor helper_id) as |actor|}}\r\n        <option value="{{helper_id}}">{{actor.name}}</option>\r\n        {{/with}}\r\n        {{/each}}\r\n    </select>\r\n    {{else}}\r\n    <div>{{localizeHeart "none"}}</div>\r\n    {{/if}}\r\n\r\n    <div class="wide">\r\n        {{#each characters as |character|}}\r\n        {{#with (getActor character) as |actor|}}\r\n        {{#if actor.isOwner}}\r\n            <button data-action="roll" data-character="{{character}}"> <span class="fas fa-dice"></span> {{actor.name}}</button>\r\n        {{/if}}\r\n        {{/with}}\r\n        {{/each}}\r\n    </div>\r\n</form>'},ie={path:"heart:applications/requirement-form/application.html",source:'{{#> "heart:applications/base/application.html" type=options.type}}\r\n{{#each options.requirements as |entry name|}}\r\n<label>\r\n    {{entry.label}}\r\n</label>\r\n{{#if entry.isCheckbox}}\r\n    <input type="checkbox" name="{{name}}" value="{{entry.value}}"/>\r\n{{else}}\r\n    <select name="{{name}}" {{#if entry.isMany}}multiple{{/if}}>\r\n        {{#each entry.options as |label value|}}\r\n            <option value="{{value}}">{{label}}</option>\r\n        {{/each}}\r\n    </select>\r\n{{/if}}\r\n{{/each}}\r\n{{/ "heart:applications/base/application.html"}}'},le={path:"heart:common/sheet.html",source:'<form class="heart sheet base {{documentName}} {{type}} {{cssClass}} flexcol" autocomplete="off">\r\n    <div class="info">\r\n        <img class="profile" src="{{data.img}}" title="{{data.name}}" data-edit="img" />\r\n        <div class="text">\r\n            <input name="name" value="{{data.name}}" placeholder="{{localizeHeart type \'name\'}}" />\r\n            <div class="subtitle">{{localizeHeart type "label-single"}}</div>        \r\n        </div>\r\n    </div>\r\n    {{> @partial-block }}\r\n</form>'},ne={path:"heart:items/ability/sheet.html",source:'{{#> "heart:items/base/sheet.html" type="ability"}}\r\n{{/ "heart:items/base/sheet.html" }}'},oe={path:"heart:items/base/sheet.html",source:'{{#> "heart:common/sheet.html" documentName="item" type=type}}\r\n    {{log this}}\r\n    {{#if data.data.di_size}}\r\n    <div class="grid-2 auto-first-col place-center" style="flex: auto 0 0">\r\n        <label>\r\n            {{localizeHeart "di_size" "label-single"}}\r\n        </label>\r\n        {{#if editable}}\r\n        <select name="data.di_size">\r\n            {{selectOptions di_sizes selected=data.data.di_size}}\r\n        </select>\r\n        \r\n        {{else}}\r\n        {{data.data.di_size}}\r\n        {{/if}}\r\n        \r\n        {{> @partial-block }}\r\n    </div>\r\n        \r\n    {{/if}}\r\n    {{editor content=data.data.description target="data.description" button=true editable=editable owner=owner}}\r\n{{/ "heart:common/sheet.html" }}'},ce={path:"heart:items/beat/sheet.html",source:'{{#> "heart:items/base/sheet.html" type="beat"}}\r\n{{/ "heart:items/base/sheet.html" }}'},de={path:"heart:items/equipment/sheet.html",source:'{{#> "heart:items/base/sheet.html" type="equipment"}}\r\n<label>{{localizeHeart "equipment" "type" "label-single"}}</label>\r\n<select name="data.type">\r\n    {{selectOptions equipment_types selected=data.data.type}}\r\n</select>\r\n{{/ "heart:items/base/sheet.html" }}'},he={path:"heart:items/fallout/sheet.html",source:'{{#> "heart:items/base/sheet.html" type="fallout"}}\r\n{{/ "heart:items/base/sheet.html" }}'},ue={path:"heart:items/haunt/sheet.html",source:'{{#> "heart:items/base/sheet.html" type="haunt"}}\r\n{{/ "heart:items/base/sheet.html" }}'},pe={path:"heart:items/resource/sheet.html",source:'{{#> "heart:items/base/sheet.html" type="resource"}}\r\n<label>\r\n    {{localizeHeart "domain" "label-single"}}\r\n</label>\r\n{{#if editable}}\r\n    <select name="data.domain">\r\n        {{selectOptions domains selected=data.data.domain}}\r\n    </select>\r\n{{else}}\r\n    {{localizeHeart "domain" data.data.domain}}\r\n{{/if}}\r\n\r\n{{/ "heart:items/base/sheet.html"}}'},me={path:"heart:rolls/fallout-roll/roll.html",source:'<div class="dice-roll heart fallout-roll">\r\n    {{#if flavor}}\r\n    <div class="dice-flavor">{{flavor}}</div>\r\n    {{/if}}\r\n    <div class="dice-result">\r\n        <div class="dice-formula">{{description}}</div>\r\n        {{{tooltip}}}\r\n        <h4 class="dice-total text">{{localizeHeart \'rolls\' \'fallout-roll\' \'results\' result}}</h4>\r\n    </div>\r\n</div>'},fe={path:"heart:rolls/heart-roll/roll.html",source:'<form class="dice-roll heart heart-roll">\r\n    <input type="hidden" name="character" value="{{character}}"/>\r\n    {{#if flavor}}\r\n    <div class="dice-flavor">{{flavor}}</div>\r\n    {{/if}}\r\n    <div class="dice-result">\r\n        <div class="dice-formula">{{description}}</div>\r\n        {{{tooltip}}}\r\n        <div class="flexrow">\r\n            <h4 class="dice-total text">{{localizeHeart "result" result}}</h4>\r\n            {{#if (and showStressRollButton (lookup (getActor character) "isOwner"))}}\r\n            <button class="icon-button" data-action=\'roll-stress\' title="{{localizeHeart \'rolls\' \'stress-roll\' \'action\'}}">\r\n                <span class="fas fa-dice"></span>\r\n            </button>\r\n            {{/if}}\r\n        </div>\r\n    </div>\r\n</form>'},ge={path:"heart:rolls/heart-roll/tooltip.html",source:'<div class="dice-tooltip" style="display: none;">\r\n    {{#each parts}}\r\n    <section class="tooltip-part">\r\n        <div class="dice">\r\n            <header class="part-header">\r\n                {{#if this.flavor}}<span class="part-formula">{{this.flavor}}</span>{{/if}}\r\n            </header>\r\n            <ol class="dice-rolls">\r\n            {{#each this.rolls as |roll index|}}\r\n                {{#if (numEq @../index ../../kept)}}\r\n                <li class="roll {{this.classes}}">{{{roll.result}}}</li>\r\n                {{else}}\r\n                <li class="roll discarded {{this.classes}}">{{{roll.result}}}</li>\r\n                {{/if}}\r\n            {{/each}}\r\n            </ol>\r\n        </div>\r\n    </section>\r\n    {{/each}}\r\n</div>\r\n'},be={path:"heart:rolls/stress-roll/roll.html",source:'<form class="dice-roll heart stress-roll">\r\n    <input type="hidden" name="character" value="{{character}}"/>\r\n    {{#if flavor}}\r\n    <div class="dice-flavor">{{flavor}}</div>\r\n    {{/if}}\r\n    <div class="dice-result">\r\n        <div class="dice-formula">{{description}}</div>\r\n        {{{tooltip}}}\r\n        <div class="flexrow">\r\n            <h4 class="dice-total">{{total}} {{localizeHeart \'stress\'}}</h4>\r\n            {{#if showTakeStressButton}}\r\n            <button class="icon-button" data-action="take-stress" title="{{localizeHeart \'rolls\' \'stress-roll\' \'take-stress\' }}">\r\n                <span class="fas fa-heart-broken"></span>\r\n            </button>\r\n            {{/if}}\r\n            {{#if showFalloutRollButton}}\r\n            <button class="icon-button" data-action="roll-fallout" title="{{localizeHeart \'rolls\' \'fallout-roll\' \'action\' }}">\r\n                <span class="fas fa-radiation-alt"></span>\r\n            </button>\r\n            {{/if}}\r\n        </div>\r\n    </div>\r\n</form>'};var ve=a(379),ye=a.n(ve),ke=a(795),we=a.n(ke),xe=a(695),ze=a.n(xe),Te=a(216),_e=a.n(Te),Ce=a(402),He={styleTagTransform:function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}},setAttributes:function(e){var t=a.nc;t&&e.setAttribute("nonce",t)},insert:function(e){var t=ze()("head");if(!t)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");t.appendChild(e)}};He.domAPI=we(),He.insertStyleElement=_e(),ye()(Ce.Z,He),Ce.Z&&Ce.Z.locals&&Ce.Z.locals;var Se=a(746),Oe={styleTagTransform:function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}},setAttributes:function(e){var t=a.nc;t&&e.setAttribute("nonce",t)},insert:function(e){var t=ze()("head");if(!t)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");t.appendChild(e)}};Oe.domAPI=we(),Oe.insertStyleElement=_e(),ye()(Se.Z,Oe),Se.Z&&Se.Z.locals&&Se.Z.locals;var Ae=a(875),Re={styleTagTransform:function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}},setAttributes:function(e){var t=a.nc;t&&e.setAttribute("nonce",t)},insert:function(e){var t=ze()("head");if(!t)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");t.appendChild(e)}};function qe(e){return class extends e{get template(){return le.path}get default_img(){return CONST.DEFAULT_TOKEN}get img(){return systems/heart/assets/battle-gear.svg}getData(){const e=super.getData();return e.data.img===this.default_img&&(e.data.img=this.img),e}}}Re.domAPI=we(),Re.insertStyleElement=_e(),ye()(Ae.Z,Re),Ae.Z&&Ae.Z.locals&&Ae.Z.locals;class je extends(qe(ActorSheet)){static get type(){return"base"}get template(){return V.path}get img(){return this.default_img}getData(){const e=super.getData(),t={};return Object.keys(CONFIG.Item.typeLabels).forEach((e=>{t[e]=[]})),this.actor.items.forEach((e=>{t[e.type].push(e)})),e.heart=t,e}}const Ee=JSON.parse('{"v":{"adversary":{"names":"","descriptors":"","motivation":"","difficulty":"","resistance":"","protection":"","resources":[],"equipment":"","special":""}}}');class Ie extends je{static get type(){return Object.keys(Ee.v)[0]}get template(){return X.path}get img(){return"systems/heart/assets/high-punch.svg"}}var $e=a(963),Fe={styleTagTransform:function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}},setAttributes:function(e){var t=a.nc;t&&e.setAttribute("nonce",t)},insert:function(e){var t=ze()("head");if(!t)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");t.appendChild(e)}};Fe.domAPI=we(),Fe.insertStyleElement=_e(),ye()($e.Z,Fe),$e.Z&&$e.Z.locals&&$e.Z.locals;const Le=JSON.parse('{"v":{"character":{"templates":["resistance","skills","domains"],"class":"","calling":"","active_beats":[],"equipment":[],"resources":[],"abilities":[],"fallout":[],"notes":""}}}');class Ne extends je{static get type(){return Object.keys(Le.v)[0]}get template(){return Y.path}get img(){return"systems/heart/assets/high-punch.svg"}activateListeners(e){super.activateListeners(e),e.find(".ordered-checkable-box:not(.checked)").click((e=>{e.preventDefault();const t=e.currentTarget,a=parseInt(t.dataset.index),r={};r[t.parentElement.dataset.target]=a+1,this.actor.update(r)})),e.find(".ordered-checkable-box.checked").click((e=>{e.preventDefault();const t=e.currentTarget,a=parseInt(t.dataset.index),r=t.parentElement.dataset.target,s={};a+1===getProperty(this.actor.data,r)?s[r]=a:s[r]=a+1,this.actor.update(s)})),e.find("[data-action=prepare-request-roll]").click((e=>{new game.heart.applications.PrepareRollRequestApplication({}).render(!0)})),e.find("[data-action=add][data-type]").click((e=>{const t=$(e.currentTarget).data("type"),a=new CONFIG.Item.documentClass({type:t,name:`New ${t}`});this.actor.createEmbeddedDocuments("Item",[a.toObject()])})),e.find("[data-action=view]").click((e=>{const t=$(e.currentTarget).closest("[data-item]").data("item");this.actor.items.get(t).sheet.render(!0)})),e.find("[data-action=delete]").click((e=>{const t=$(e.currentTarget).closest("[data-item]").data("item");this.actor.items.get(t).delete()})),e.find("[data-action=item-roll]").click((async e=>{const t=$(e.currentTarget).closest("[data-item]").data("item"),a=this.actor.items.get(t),r=game.heart.rolls.ItemRoll.build({item:a});await r.evaluate({async:!0}),r.toMessage({flavor:`${a.name} (<span class="item-type">${a.type}</span>)`,speaker:{actor:this.actor.id}})})),e.find("[data-action=roll]").click((async e=>{(await game.heart.rolls.HeartRoll.build({character:this.actor.id})).toMessage({speaker:{actor:this.actor.id}})})),e.find("[data-action=stress-roll]").click((async e=>{(await game.heart.rolls.StressRoll.build({character:this.actor.id})).toMessage({speaker:{actor:this.actor.id}})})),e.find("[data-action=fallout-roll]").click((async e=>{(await game.heart.rolls.FalloutRoll.build({character:this.actor.id})).toMessage({speaker:{actor:this.actor.id}})}))}}const Ze=JSON.parse('{"v":{"delve":{"domains":[],"tier":[],"stress":"","resistance":10,"events":[],"connection":"","description":""}}}');class Pe extends je{static get type(){return Object.keys(Ze.v)[0]}get template(){return ee.path}get img(){return"systems/heart/assets/dungeon-light.svg"}}const Me=JSON.parse('{"v":{"landmark":{"domains":[],"description":"","stress":"d4","haunts":[]}}}');class Be extends je{static get type(){return Object.keys(Me.v)[0]}get template(){return te.path}get img(){return"systems/heart/assets/occupy.svg"}}function De(e){return new Proxy(e,{get:(e,t,a)=>"totalStress"===t?Object.values(e.data.data.resistances).reduce(((e,t)=>e+t.value),0):void 0!==e.itemTypes[t]?e.itemTypes[t]:void 0})}var Je=[_,T,C,H,S],Ge=[O];class Ue extends Actor{get proxy(){return void 0===this._proxy&&void 0!==this.constructor.proxies[this.type]&&(this._proxy=this.constructor.proxies[this.type](this)),this._proxy}}function We(){console.log("heart | Registering actor sheets"),Actors.unregisterSheet("core",ActorSheet),Je.forEach((function(e){const t=e.default,a=t.type;void 0===game.heart.actors&&(game.heart.actors={}),void 0===game.heart.actors[a]&&(game.heart.actors[a]={}),CONFIG.Actor.typeLabels[a]=`heart.${a}.label-single`,game.heart.actors[a].sheet=t,"base"!==a&&Actors.registerSheet("heart",t,{types:[a],makeDefault:!0,label:`heart.${a}`})})),CONFIG.Actor.documentClass=Ue,Ge.forEach((function(e){Ue.proxies[e.default.name.toLowerCase()]=e.default}))}Ue.proxies={};class Ke extends FormApplication{static get defaultOptions(){return foundry.utils.mergeObject(super.defaultOptions,{classes:["form","heart",this.formType]})}static get formType(){return"base"}static async build(e,t){try{const a=Object.entries(e).reduce(((e,[t,a])=>(e[t]=a.value[0],e)),{});await this._roll(a,t)}catch(a){return new this({},{heart:e,msg:t}).render(!0)}}static async _roll(e){ui.notifications.error(`_roll has not been defined for ${this.formType}`)}get title(){return"base"!==this.constructor.formType?game.i18n.localize(`heart.applications.${this.constructor.formType}.title`):super.title}activateListeners(e){e.find("button").click((e=>{e.preventDefault()})),e.find("[data-action=cancel]").click((e=>{this.close()}))}}class Qe extends Ke{static get defaultOptions(){return foundry.utils.mergeObject(super.defaultOptions,{template:re.path})}static get formType(){return"prepare-roll-request"}getData(){const e=super.getData();return mergeObject(e,{characters:game.actors.filter((e=>"character"===e.type)).reduce(((e,t)=>(e[t.id]=t.name,e)),{}),skills:game.heart.skills.reduce(((e,t)=>(e[t]=game.i18n.localize(`heart.skill.${t}`),e)),{}),domains:game.heart.domains.reduce(((e,t)=>(e[t]=game.i18n.localize(`heart.domain.${t}`),e)),{}),difficulties:game.heart.difficulties.reduce(((e,t)=>(e[t]=game.i18n.localize(`heart.difficulty.${t}`),e)),{})})}activateListeners(e){super.activateListeners(e);const t=e.get(0);e.find("[data-action=submit]").click((async e=>{const a=new FormData(t),r=a.get("difficulty"),s=a.getAll("character"),i=a.getAll("skill"),l=a.getAll("domain"),n=a.getAll("helper");CONFIG.ChatMessage.documentClass.create({flags:{heart:{"roll-request":{difficulty:r,characters:s,skills:i,domains:l,validHelpers:n}}}}),this.close()}))}}class Xe extends Ke{static get defaultOptions(){return foundry.utils.mergeObject(super.defaultOptions,{template:ie.path})}static get formType(){return"requirement"}static build({requirements:e,callback:t,type:a}){new this({},{type:a,requirements:e,callback:t}).render(this)}activateListeners(e){super.activateListeners(e);const t=e.get(0);e.find("[data-action=submit]").click((async e=>{const a=new FormData(t),r=Object.entries(this.options.requirements).reduce(((e,[t,r])=>{if(r.isCheckbox){const r=a.get(t);e[t]=null!==r}else r.isMany?e[t]=a.getAll(t):e[t]=a.get(t);return e}),{});this.options.callback(r),this.close()}))}}var Ve=a(780),Ye={styleTagTransform:function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}},setAttributes:function(e){var t=a.nc;t&&e.setAttribute("nonce",t)},insert:function(e){var t=ze()("head");if(!t)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");t.appendChild(e)}};Ye.domAPI=we(),Ye.insertStyleElement=_e(),ye()(Ve.Z,Ye),Ve.Z&&Ve.Z.locals&&Ve.Z.locals;var et=[R,q,j];function tt(){console.log("heart | Registering applications"),void 0===game.heart.applications&&(game.heart.applications={}),et.forEach((function(e){game.heart.applications[e.default.name]=e.default,e.initialise&&e.initialise()}))}var at=a(429),rt={styleTagTransform:function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}},setAttributes:function(e){var t=a.nc;t&&e.setAttribute("nonce",t)},insert:function(e){var t=ze()("head");if(!t)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");t.appendChild(e)}};rt.domAPI=we(),rt.insertStyleElement=_e(),ye()(at.Z,rt),at.Z&&at.Z.locals&&at.Z.locals;class st extends ChatMessage{get isRollRequest(){return void 0!==this.getFlag("heart","roll-request")}get stressRoll(){if(this.roll instanceof game.heart.rolls.StressRoll)return this.roll;const e=this.getFlag("heart","stress-roll");return void 0!==e?CONFIG.Dice.rolls.find((t=>t.name===e.class)).fromData(e):void 0}async setStressRoll(e){const t=e.toJSON();await this.setFlag("heart","stress-roll",t)}get showStressRollButton(){const e=this.getFlag("heart","show-stress-roll-button");return void 0===this.stressRoll&&(void 0===e||Boolean(e))}set showStressRollButton(e){return this.setFlag("heart","show-stress-roll-button",e)}get showTakeStressButton(){const e=this.getFlag("heart","show-take-stress-button");return void 0!==this.stressRoll&&(void 0===e||Boolean(e))}set showTakeStressButton(e){return this.setFlag("heart","show-take-stress-button",e)}get falloutRoll(){if(this.roll instanceof game.heart.rolls.FalloutRoll)return this.roll;const e=this.getFlag("heart","fallout-roll");return void 0!==e?CONFIG.Dice.rolls.find((t=>t.name===e.class)).fromData(e):void 0}set falloutRoll(e){const t=e.toJSON();this.setFlag("heart","fallout-roll",t)}get showFalloutRollButton(){const e=this.getFlag("heart","show-fallout-roll-button");return void 0===this.falloutRoll&&(void 0===e||Boolean(e))}set showFalloutRollButton(e){return this.setFlag("heart","show-fallout-roll-button",e)}async getHTML(){const e=await super.getHTML();if(this.isRoll&&this.isContentVisible){if(e.find(".message-content").html(await this.roll.render({isPrivate:!1,showStressRollButton:this.showStressRollButton,showTakeStressButton:this.showTakeStressButton,showFalloutRollButton:this.showFalloutRollButton})),this.stressRoll&&this.stressRoll!==this.roll){const t=await this.stressRoll.render({isPrivate:!1,showTakeStressButton:this.showTakeStressButton,showFalloutRollButton:this.showFalloutRollButton});e.append($('<div class="message-content"></div>').append(t))}if(this.falloutRoll&&this.falloutRoll!==this.roll){const t=await this.falloutRoll.render({isPrivate:!1});e.append($('<div class="message-content"></div>').append(t))}}if(this.isRollRequest){const t=this.getFlag("heart","roll-request"),a=await renderTemplate("heart:applications/prepare-roll-request/chat-message.html",t);e.append(a)}return e}}function it(e){e.on("click","form button",(e=>{e.preventDefault()})),e.on("click","form.roll-request [data-action=roll][data-character]",(e=>{const t=$(e.currentTarget),{character:a}=t.data(),r=t.closest("form.roll-request"),s=new FormData(r.get(0));s.set("character",a);const i=game.heart.applications.PrepareRollApplication.getBuildData({character:[a],difficulty:r.find("[name=difficulty]").map(((e,t)=>t.value)).get(),skill:r.find("[name=skill]").map(((e,t)=>t.value)).get(),domain:r.find("[name=domain]").map(((e,t)=>t.value)).get(),helper:r.find("[name=helper]").map(((e,t)=>t.value)).get()},s);return game.heart.applications.PrepareRollApplication.build(i)}))}function lt(){console.log("heart | Registering ChatMessage"),CONFIG.ChatMessage.documentClass=st,Hooks.once("renderChatLog",((e,t,a)=>it(t))),Hooks.once("renderChatPopout",((e,t,a)=>it(t)))}class nt extends(qe(ItemSheet)){static get type(){return"base"}get template(){return oe.path}get default_img(){return"icons/svg/item-bag.svg"}get img(){return this.default_img}getData(){const e=super.getData();return e.di_sizes=game.heart.di_sizes.reduce(((e,t)=>(e[t]=game.i18n.format("heart.di_size.d(N)",{N:t.replace(/^d/,"")}),e)),{}),e.domains=game.heart.domains.reduce(((e,t)=>(e[t]=game.i18n.localize(`heart.domain.${t}`),e)),{}),e.equipment_types=game.heart.equipment_types.reduce(((e,t)=>(e[t]=game.i18n.localize(`heart.equipment.type.${t}`),e)),{}),e}}const ot=JSON.parse('{"c":{"ability":{"templates":["has_description"]}}}'),ct=Object.freeze({type:Object.keys(ot.c)[0],img:"systems/heart/assets/skills.svg",template:ne.path}),dt=JSON.parse('{"c":{"beat":{"templates":["has_description"],"type":""}}}'),ht=Object.freeze({type:Object.keys(dt.c)[0],img:"systems/heart/assets/drum.svg",template:ce.path}),ut=JSON.parse('{"c":{"equipment":{"templates":["is_rollable","has_description"],"type":"miscellaneous"}}}'),pt=["miscellaneous","delve","kill","mend"];function mt(){game.heart.equipment_types=pt}const ft=Object.freeze({type:Object.keys(ut.c)[0],img:"systems/heart/assets/battle-gear.svg",template:de.path}),gt=JSON.parse('{"c":{"fallout":{"templates":["has_description"]}}}'),bt=Object.freeze({type:Object.keys(gt.c)[0],img:"systems/heart/assets/fallout-shelter.svg",template:he.path}),vt=JSON.parse('{"c":{"haunt":{"templates":["has_description"]}}}'),yt=Object.freeze({type:Object.keys(vt.c)[0],img:"systems/heart/assets/prayer.svg",template:ue.path}),kt=JSON.parse('{"c":{"resource":{"templates":["is_rollable","has_description"],"domain":""}}}'),wt=Object.freeze({type:Object.keys(kt.c)[0],img:"systems/heart/assets/ore.svg",template:pe.path});var xt=[L,F,N,Z,P,M,B];function zt(){console.log("heart | Registering item sheets"),Items.unregisterSheet("core",ItemSheet),xt.forEach((e=>{const t=e.data;let a;a=void 0!==e.default?e.default:t.sheet instanceof ItemSheet?t.sheet:function(e){const t=Object.freeze({...e});return class extends nt{static get type(){return e.type}get template(){return t.template}get img(){return t.img}}}(t);const r=a.type;console.log(`heart | -- Registering ${r} sheet`),void 0===game.heart.items&&(game.heart.items={}),void 0===game.heart.items[r]&&(game.heart.items[r]={}),game.heart.items[r].sheet=a,CONFIG.Item.typeLabels[r]=`heart.${r}.label-single`,e.initialise&&e.initialise(),"base"!==r&&Items.registerSheet("heart",a,{types:[r],makeDefault:!0,label:`heart.${r}`})}))}var Tt=a(979),_t={styleTagTransform:function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}},setAttributes:function(e){var t=a.nc;t&&e.setAttribute("nonce",t)},insert:function(e){var t=ze()("head");if(!t)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");t.appendChild(e)}};_t.domAPI=we(),_t.insertStyleElement=_e(),ye()(Tt.Z,_t),Tt.Z&&Tt.Z.locals&&Tt.Z.locals;const Ct={"no-fallout":(e,t)=>e>t,"minor-fallout":(e,t)=>e<=t&&e<=6,"major-fallout":(e,t)=>e<=t&&e>6};function Ht(){game.heart.fallout_results=Object.keys(Ct)}class St extends Roll{static get CHAT_TEMPLATE(){return me.path}static get requirements(){const e=game.actors.filter((e=>"character"===e.type));return{character:{label:game.i18n.localize("heart.character.label-single"),options:e.reduce(((e,t)=>(e[t.data._id]=t.name,e)),{})}}}static build({character:e}={},t={},a={}){return new Promise(((r,s)=>{const i=this.requirements;void 0!==e&&delete i.character;const l={character:e};if(!(Object.keys(i).length>0))return r(this._build(l,t,a));game.heart.applications.RequirementApplication.build({requirements:i,callback:e=>{mergeObject(l,e),r(this._build(l,t,a))},type:"prepare-fallout-roll"})}))}static _build({character:e},t={},a={}){const r=game.actors.get(e).proxy;return a.totalStress=r.totalStress,new this("1d12",t,a)}get result(){return Object.keys(Ct).find((e=>Ct[e](this.total,this.options.totalStress)))}async render(e={}){const t=(e=foundry.utils.mergeObject({user:game.user.id,flavor:null,template:this.constructor.CHAT_TEMPLATE,blind:!1},e)).isPrivate;this._evaluated||await this.evaluate({async:!0});const a=game.i18n.format("heart.rolls.fallout-roll.description(totalStress)",{totalStress:this.options.totalStress}),r={description:t?"???":a,formula:t?"???":this._formula,flavor:t?null:e.flavor,user:e.user,tooltip:t?"":await this.getTooltip(),total:t?"?":this.total,result:t?"?":this.result};return renderTemplate(e.template,r)}}var Ot=a(107),At={styleTagTransform:function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}},setAttributes:function(e){var t=a.nc;t&&e.setAttribute("nonce",t)},insert:function(e){var t=ze()("head");if(!t)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");t.appendChild(e)}};At.domAPI=we(),At.insertStyleElement=_e(),ye()(Ot.Z,At),Ot.Z&&Ot.Z.locals&&Ot.Z.locals;const Rt={standard:0,risky:1,dangerous:2,impossible:1/0},qt={critical_failure:[1,1],failure:[2,5],success_at_a_cost:[6,7],success:[8,9],critical_success:[10,10]},jt={critical_failure:[1,1],failure:[2,9],success_at_a_cost:[10,10]},Et=["critical_failure","failure","success_at_a_cost"];function It(){const e={...qt,...jt};game.heart.difficulties=Object.keys(Rt),game.heart.results=Object.keys(e),game.heart.stress_results=Et}class $t extends Roll{static get CHAT_TEMPLATE(){return fe.path}static get TOOLTIP_TEMPLATE(){return ge.path}static get requirements(){const e=game.actors.filter((e=>"character"===e.type)),t=game.heart.skills,a=game.heart.domains,r=game.heart.difficulties;return{character:{label:game.i18n.localize("heart.character.label-single"),options:e.reduce(((e,t)=>(e[t.data._id]=t.name,e)),{})},difficulty:{label:game.i18n.localize("heart.difficulty.label-single"),options:r.reduce(((e,t)=>(e[t]=game.i18n.localize(`heart.difficulty.${t}`),e)),{})},skill:{label:game.i18n.localize("heart.skill.label-single"),options:t.reduce(((e,t)=>(e[t]=game.i18n.localize(`heart.skill.${t}`),e)),{})},domain:{label:game.i18n.localize("heart.domain.label-single"),options:a.reduce(((e,t)=>(e[t]=game.i18n.localize(`heart.domain.${t}`),e)),{})},mastery:{label:game.i18n.localize("heart.mastery.label-single"),isCheckbox:!0},helpers:{label:game.i18n.localize("heart.helper.label-single"),isMany:!0,options:e.reduce(((e,t)=>(e[t.data._id]=t.name,e)),{})}}}static build(e={},t={},a={}){return new Promise(((r,s)=>{let{character:i,skill:l,domain:n,mastery:o,helpers:c,difficulty:d}=e;const h=this.requirements;void 0!==i&&delete h.character,void 0!==d&&delete h.difficulty,void 0!==l&&delete h.skill,void 0!==n&&delete h.domain,void 0!==o&&delete h.mastery,void 0!==c&&delete h.helpers;const u={character:i,difficulty:d,skill:l,domain:n,mastery:o,helpers:c};if(!(Object.keys(h).length>0))return r(this._build(u,t,a));game.heart.applications.RequirementApplication.build({requirements:h,callback:e=>{mergeObject(u,e),r(this._build(u,t,a))},type:"prepare-roll"})}))}static _build({character:e,difficulty:t,skill:a,domain:r,mastery:s,helpers:i}={},l={},n={}){const o=game.actors.get(e);a=o.data.data.skills[a].value?a:void 0,r=o.data.data.domains[r].value?r:void 0,i=i.filter((t=>t!==e));let c=[];[game.i18n.localize("heart.rolls.roll.base"),a?game.i18n.localize(`heart.skill.${a}`):void 0,r?game.i18n.localize(`heart.domain.${r}`):void 0,!!s&&game.i18n.localize("heart.mastery.label-short"),...i].forEach((e=>{e&&c.push(`1d10[${e}]`)})),"impossible"===t&&(c=[]);const d=Rt[t],h=d>0?`dh${d}`:"",u=`{${c.join(", ")}}${h}kh`;return n.character=e,n.result_set=c.length>d?"normal":"difficult",n.skill=a,n.domain=r,n.mastery=s,n.difficulty=t,n.helpers=i,new this(u,l,n)}get result(){if("impossible"===this.options.difficulty)return"failure";let e=qt;return"difficult"===this.options.result_set&&(e=jt),Object.keys(e).find((t=>{const[a,r]=e[t];return a<=this.total&&this.total<=r}))}async render(e={}){const t=(e=foundry.utils.mergeObject({user:game.user.id,flavor:null,template:this.constructor.CHAT_TEMPLATE,blind:!1},e)).isPrivate,a=void 0!==e.showStressRollButton&&e.showStressRollButton;this._evaluated||await this.evaluate({async:!0});const r=game.i18n.format("heart.rolls.roll.description(difficulty,count)",{difficulty:game.i18n.localize(`heart.difficulty.${this.options.difficulty}`),count:this.dice.length}),s={character:e.character||this.options.character,description:t?"???":r,formula:t?"???":this._formula,flavor:t?null:e.flavor,user:e.user,tooltip:t?"":await this.getTooltip(),showStressRollButton:!t&&a&&Et.includes(this.result),total:t?"?":this.total,result:t?"?":this.result};return renderTemplate(e.template,s)}async getTooltip(){const e=this.dice.map((e=>e.getTooltipData())),t=this.dice.findIndex((e=>e.total==this.total));return renderTemplate(this.constructor.TOOLTIP_TEMPLATE,{kept:t,parts:e})}static activateListeners(e){e.on("click",".heart-roll [data-action=roll-stress]",(async function(e){const t=$(e.currentTarget).closest(".chat-message").data("messageId"),a=game.messages.get(t),r=a.roll;r._evaluated||await this.evaluate({async:!0});const s=await game.heart.rolls.StressRoll.build({character:r.options.character,result:r.result},a);await s.evaluate({async:!0}),await a.setStressRoll(s),a.showStressRollButton=!1}))}}class Ft extends Roll{static build({item:e}={},t={},a={}){return a.item=e,new this(e.data.data.di_size,t,a)}}class Lt extends Roll{static get CHAT_TEMPLATE(){return be.path}static get requirements(){const e=game.actors.filter((e=>"character"===e.type)),t=game.heart.stress_results,a=game.heart.stress_dice;return{character:{label:game.i18n.localize("heart.character.label-single"),options:e.reduce(((e,t)=>(e[t.data._id]=t.name,e)),{})},result:{label:game.i18n.localize("heart.result.label-single"),options:t.reduce(((e,t)=>(e[t]=game.i18n.localize(`heart.result.${t}`),e)),{})},di_size:{label:game.i18n.localize("heart.di_size.label-single"),options:a.reduce(((e,t)=>(e[t]=game.i18n.format("heart.di_size.d(N)",{N:t.replace(/^d/,"")}),e)),{})}}}static build({result:e,di_size:t,character:a}={},r={},s={}){return new Promise(((i,l)=>{const n=this.requirements;void 0!==e&&delete n.result,void 0!==t&&delete n.di_size,void 0!==a&&delete n.character;const o={result:e,di_size:t,character:a};if(!(Object.keys(n).length>0))return i(this._build(o,r,s));game.heart.applications.RequirementApplication.build({requirements:n,callback:e=>{mergeObject(o,e),i(this._build(o,r,s))},type:"prepare-stress-roll"})}))}static _build({result:e,di_size:t,character:a},r={},s={}){s.result=e,s.di_size=t,s.character=a;let i=t;return"critical_failure"===e&&(i=`2 * {${t}}`),new this(i,r,s)}async render(e={}){const t=(e=foundry.utils.mergeObject({user:game.user.id,flavor:null,template:this.constructor.CHAT_TEMPLATE,blind:!1},e)).isPrivate,a=void 0!==e.showTakeStressButton&&e.showTakeStressButton,r=void 0!==e.showFalloutRollButton&&e.showFalloutRollButton;this._evaluated||await this.evaluate({async:!0});const s=game.i18n.format("heart.rolls.stress-roll.description(di_size)",{di_size:this.options.di_size,result:game.i18n.localize(`heart.result:${this.options.result}`)}),i={character:e.character||this.options.character,description:t?"???":s,formula:t?"???":this._formula,flavor:t?null:e.flavor,user:e.user,tooltip:t?"":await this.getTooltip(),showTakeStressButton:!t&&a,showFalloutRollButton:!t&&!a&&r,total:t?"?":this.total,result:t?"?":this.result};return renderTemplate(e.template,i)}async takeStress(e,t="blood"){return new Promise(((t,a)=>{e=e||this.options.character,game.heart.applications.RequirementApplication.build({requirements:{resistance:{options:game.heart.resistances.reduce(((e,t)=>(e[t]=game.i18n.localize(`heart.resistance.${t}`),e)),{})}},callback:({resistance:r})=>{const s=game.actors.get(e),i={},l=s.data.data.resistances[r],n=this.total;void 0===n&&(ui.notifications.error("Somehow this roll isn't evaluated",this),a());const o=(l.value||0)+Math.max(0,parseInt(n)-l.protection);i[`data.resistances.${r}.value`]=o,s.update(i),t()},type:"take-stress"})}))}asybuildFalloutRoll(e){return e=e||this.options.character,game.heart.rolls.FalloutRoll.build({character:e})}static activateListeners(e){e.on("click",".stress-roll [data-action=take-stress]",(async function(e){e.preventDefault();const t=$(e.currentTarget).closest(".chat-message").data("messageId"),a=game.messages.get(t),r=a.stressRoll,s=r.options.character;await r.takeStress(s),a.showTakeStressButton=!1,a.showFalloutRollButton=!0})),e.on("click",".stress-roll [data-action=roll-fallout]",(async function(e){e.preventDefault();const t=$(e.currentTarget).closest(".chat-message").data("messageId"),a=game.messages.get(t),r=a.stressRoll,s=await game.heart.rolls.FalloutRoll.build({character:r.options.character});await s.evaluate({async:!0}),a.falloutRoll=s,a.showFalloutRollButton=!1}))}}var Nt=a(361),Zt={styleTagTransform:function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}},setAttributes:function(e){var t=a.nc;t&&e.setAttribute("nonce",t)},insert:function(e){var t=ze()("head");if(!t)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");t.appendChild(e)}};Zt.domAPI=we(),Zt.insertStyleElement=_e(),ye()(Nt.Z,Zt),Nt.Z&&Nt.Z.locals&&Nt.Z.locals;var Pt=[J,G,U,W];function Mt(){console.log("heart | Registering rolls"),Pt.forEach((e=>{const t=e.default,a=CONFIG.Dice.rolls.findIndex((e=>e.name===t.name));a<0?CONFIG.Dice.rolls.push(t):CONFIG.Dice.rolls[a]=t,void 0===game.heart.rolls&&(game.heart.rolls={}),game.heart.rolls[t.name]=t,void 0!==t.activateListeners&&(Hooks.on("renderChatLog",((e,a,r)=>t.activateListeners(a))),Hooks.on("renderChatPopout",((e,a,r)=>t.activateListeners(a)))),void 0!==e.initialise&&e.initialise()}))}var Bt=[r,s,i,l,n,o,c,d,h,u,p,m,f,g,b,v,y,k,w,x,z],Dt=[A,E,I,Q,D,K];Hooks.once("init",(function(){Hooks._ids={},Hooks._hooks.renderChatLog=[],Hooks._hooks.renderChatPopout=[],Bt.forEach((function(e){const t=e.default,a=Handlebars.compile(t.source);Handlebars.registerPartial(t.path,a),_templateCache[t.path]=a})),game.heart={difficulties:["standard","risky","dangerous","impossible"],resistances:["blood","mind","echo","fortune","supplies"],skills:["compel","delve","discern","endure","evade","hunt","kill","mend","sneak"],domains:["cursed","desolate","haven","occult","religion","technology","warren","wild"],stress_dice:["d4","d6","d8","d10","d12"],di_sizes:["d4","d6","d8","d10","d12"]},console.log(`heart | Registering ${Dt.length} modules`),Dt.forEach((e=>{void 0!==e.initialise&&e.initialise()})),Handlebars.registerHelper("ordered-checkable",(function(e,t){let a="";for(let r=0;r<t;r++)a+=`<a data-index="${r}" class="ordered-checkable-box${r<e?" checked":""}"></a>`;return a})),Handlebars.registerHelper("join",(function(e,...t){const a=t.pop().hash.array||[];return[...t,...a].join(e)})),Handlebars.registerHelper("concat",(function(e,t){return e+t})),Handlebars.registerHelper("titlecase",(function(e){return e[0].toUpperCase()+e.slice(1)})),Handlebars.registerHelper("includes",(function(e,t,a){return void 0===e?(console.warn("includes has undefined array",e,t,a),!1):e.includes(t)})),Handlebars.registerHelper("randomID",(function(){return randomID()})),Handlebars.registerHelper("numEq",(function(e,t){return e==t})),Handlebars.registerHelper("notification",(function(e,t,a){const r=Boolean(e)?"check":"times";let s=a.hash.optional?"optional":"required";return`<span class="fas fa-${r}-circle" data-notification="${s}" data-target="${t}" title="${game.i18n.localize(`heart.notification:${s}`)}" data-type="${a.hash.type}"></span>`})),Handlebars.registerHelper("getActor",(function(e){return game.actors.get(e)})),Handlebars.registerHelper("localizeHeart",(function(...e){const t=e.splice(-1,1)[0],a=`heart.${e.join(".")}`;return HandlebarsHelpers.localize(a,t)})),Handlebars.registerHelper("ownsAnyActors",(function(e){for(let t of e){const e=game.actors.get(t);if(e&&e.isOwner)return!0}return!1}))})),Hooks.once("ready",(function(){game.settings.register("heart","normalActionTable",{name:"Normal Actions RollTable Source",hint:"When we roll d10 for normal actions, use this table",scope:"world",config:!0,default:"Compendium.heart.action-tables.eEJiBJABFXLu1QKR",type:String}),game.settings.register("heart","difficultActionTable",{name:"Difficult Actions RollTable Source",hint:"When we roll d10 for difficult actions, use this table",scope:"world",config:!0,default:"Compendium.heart.action-tables.GkSEWldXerpMjmkG",type:String})}))},239:(e,t,a)=>{e.exports=a.p+"ece5e5658ae157a8cf70.ttf"}},t={};function a(r){var s=t[r];if(void 0!==s)return s.exports;var i=t[r]={id:r,exports:{}};return e[r](i,i.exports,a),i.exports}a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},a.d=(e,t)=>{for(var r in t)a.o(t,r)&&!a.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.p="/systems/heart/",a(805)})();